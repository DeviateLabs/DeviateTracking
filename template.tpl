___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Facebook Conversions API (CAPI) by Deviate Tracking",
  "categories": [
    "CONVERSIONS",
    "ADVERTISING",
    "ATTRIBUTION",
    "REMARKETING"
  ],
  "brand": {
    "id": "Deviate Tracking",
    "displayName": "Deviate Tracking",
    "thumbnail": "data:image/png;base64,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MEqevC86oM7oBO2SSxpGyZOe0QF15r3RASKVoGGUXPC5NAIdojvqzDbRASKVoGGUfGihc3RCHdLXXHJJwyj5UNB5fwPoay65pGGUfCjwdnRCHVoRHSBSCRpGyQXbnxZgdXRHnVkeHSBSCRpGyZP50QF15uXoAJFK0DBKnrwYHVBn9PWWXNIwSp78LTqgrhjzohNEKkHDKPnhzIpOqCvOzOgEkUrQMEp+OI9FJ9SRlA76RUTyScMo+dGf2cDi6Iw6McP2543oCJFK0DBKbpiRApOiO+rE+OgAkUrRMEre/C46oE78NjpApFJ0SifJFX+aDixjAbBjdEuOPWn92D86QqRSdMQouWL7sBq4Oboj15yfRieIVJKGUfKnwBVAOTojp5bSys+jI0QqScMouWO9eQ7TY40Vco19mKXRESKVpMcYJZf8MfaiwF+BxuiWHFlCB/bWyzQk73TEKLlkH+JZ4Projlxx/lOjKPVAR4ySW/4w29PIXOC90S05MJuUg20ArdEhIpWmI0bJLfswS3HOiu7IgRbgdI2i1AsNo+Sa9ecu4Krojhr3TevHnOgIkWrRXamSez6XRlbzv8CHo1tqjnGb9eUT0Rki1aQjRsk9258WUo4DnopuqTGPkvDZ6AiRatMwSl2wAbyGcwzwanRLjZhLK6OsN29Hh4hUm4ZR6ob15xkKDMJ4Nrol09Zc8LnJDuH16BSRCBpGqSvWm+dwhgJ/jm7JqMk0MMz66bqWUr80jFJ3rB8vsIJBwJ3RLRnzY1KOsoNYEh0iEknPSpW65Y4xk89jXAl0ju4J9BbOOdZfVyURAQ2jCD6b/Um5Fjg8uiXA7ynwFevNy9EhIlmhYRThnaPH2ZyE831gj+ieKniChPOsDxOiQ0SyRsMosg5/nAYSTsM5D6NXdE8FPI5zCf24wwyPjhHJIg2jyLtwx5jDEMqcgXEcsH1001ZYDPwO5wbrz4zoGJGs0zCKbII/TQeWMRQYDgwE+gMNsVUbtQJ4DGM6zkSeYbqdSDk6SqRWaBhFNpM/TgMN7EWZXkBPYBdg27Ag4y1gMc4rlJnHAJ43Iw3rEREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREZFcsOgAkQg++rbCy9sv3aFxZcuO0S3RWjo1vpmubHGA3W89a0l0j0g0DaPk2kujr+hU6Nz4oSRNBmF+oDm9HHYHdo5uy6gUeB141uCvDk+AP9itU8NMu/7M1ug4kWrQMEruzD/pul0KxfJHU/wEgyagQ3RTDrxtzj2e2B3JSr+z6+1nL48OEqkUDaPkxsJPXz3IUzsL7GNoDCtpmcMtlqbXdr/l3D9Hx4i0Nw2j1Lz5n/7R4Ulqzaw5OpTqcYc7ErPvdrvxrCeiY0Tai4ZRatZrp/1411b3Sww/NbqlzqWO3UKx9I0ev/jy4ugYka2lYZSa47gtOuWaL7rZfwGdo3vkHxab+ZndbjznjugQka2hYZSa8tIZN+zU0Lr6RpxjoltkA8xuWJl0OnfPX35mVXSKyJbQMErNWPSpn+yTFsp3AvtFt8gmGA8X0uJHu9x85qvRKSKbS8MoNWHhaT861N3GAXX/gvza4S8m5eLwrrd+8enoEpHNkUQHiGzKq6dcPcTdJqBRrDH2vrRQ/t9XT/7JB6NLRDaHjhgl0+Z/+tr+SepTgW2jW2QLGfPTkg/sees5L0SniLSFjhglsxacevWeSep3o1GsbU7PpMC4JadfqSN+qQkaRsmkp8+9qoOR3A50j26R9mAfXF3ucJPjupdKMk/DKJm07VvFKx36R3dIe/JjF5167dejK0Q2Rb+9SeYsOPXHQyGdhL4/82i1p4V+PW754pPRISIboiNGyZT5X7iuM6Q3oFHMqw5m6fW6S1WyTMMomVJYVfoGsGd0h1SQ+aCFp1z7yegMkQ3Rb22SGa9+5qouVio8A2wf3SIV9/yyHcv77XP1l1dHh4isT0eMkhlWKnwdjWK92GO7JYmuiiKZpCNGyYQFp16+DXR+Adg5ukWqw2Be1/cv/qA1N6fRLSLr0hGjZIJZ51PQKNYVh16Lnu06NLpDZH0aRsmE1DklukECuJ8cnSCyPt2VKuHmf+pHuycFew59P9ajZSsLnbvq2o2SJTpilHCFhFFoFOvVdp1Lbx8WHSGyLg2jhHOzkdENEidN9O8v2aJhlCwYHB0gcczREaNkioZRQs0/7br3AbtEd0iog3xIczE6QmQtDaOEsrR8YHSDhOv06m5d9omOEFlLwyjBXOdFFYrO7tENImtpGCVUkvh7oxsknpu9L7pBZC0No4RyEp3tRnDznaIbRNbSMEosTztHJ0g8d+8U3SCyloZRQjl0iG6QeAnWMbpBZC0No4QyTKcCE1JjZXSDyFoaRom2IjpAMiA1DaNkhoZRYpktjk6QTFgUHSCyloZRQpnzUnSDxEsSfR9IdmgYJVj5uegCiWepPx/dILKWhlFCOcVZ0Q0SbmmXvRc/Gx0hspaGUUJ1v+lLizDmR3dIHIc51tycRneIrKVhlHhu90cnSBzD/je6QWRdGkYJ5/j46AaJk5j+/SVbNIwSLim13gOUozskxGtdOhYfiY4QWZeGUcJ1+/VXF+LcF90h1WfObXb9ma3RHSLr0jBKJhjcGN0g1eduN0U3iKxPwyiZ0LVz8TaDl6M7pKoe637LWQ9HR4isT8MomWDXn9nq2LXRHVI97v5f0Q0i70bDKJmRrPKrgYXRHVIFxp+77/3ab6MzRN6NhlEyo+vtZy9353vRHVJ5Scr5elG/ZJWGUTKle+fidWBzojukou7qevPZ90ZHiGyIhlEyxa4/szUp+OmAnsKfT0tLafms6AiRjdEwSuZ0/eXZs924OLpD2p/h57z3li/r2ceSaRpGyaTuey3+T8d0qrBc8eu73XSOXrcomadhlEyy5ubUS4VTMJ6ObpGt5zB9ZWGbr0R3iLSFhlEyq+evz3wNT48EFkS3yNbwJ0uNHY7f85efWRVdItIWGkbJtO43nftcCkN1zcbaZDCvaIWRu/3sc29Et4i0lYZRMq/nTWf/tZzaUOCl6BbZDM5sJzl8lxu/9Ep0isjm0DBKTdj15rPmpaViP3N0UePaMK7By0d0v+lLi6JDRDaXhlFqRs9fn/naimLnIx1+Anh0j7yrkhnf6fb+xcftfMuXl0bHiGwJiw4Q2RILTvvRsbj9FOge3SJrODxl+GndbzpHFx6WmqYjRqlJ3W88525Ysbcb3wVvie6pcyvc+O6qQufeGkXJAx0xSs1b9Kmf7ONJ6VtudjJQjO6pIyvBrit44bIuN5/5anSMSHvRMEpuLDj16j3N7Ex3Ox3oFt2TY8/hfoOVSz/r9uuv6jJhkjsaRsmduaNva+zSYfHQ1PwEsGOAXaObcuAZ4K7U7Y4eey96QJeMkjzTMEruLTj16j3Nk4FuHIDTC7O9DN/ZYRegY3RfhrwN/jrYIoxnPWVeQjonofFB3VUq9eT/A+DBiLkhYGnaAAAAAElFTkSuQmCC"
  },
  "description": "A server-side tag template that prepares information from your tagging server to be sent through Facebookâ€™s Conversions API.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "LABEL",
    "name": "Notice",
    "displayName": "This tracking tag type requires a paid subscription, you can sign up for a free trial at https://deviatetracking.com",
    "enablingConditions": [
      {
        "paramName": "pixelId",
        "paramValue": "",
        "type": "NOT_PRESENT"
      },
      {
        "paramName": "FBToken",
        "paramValue": "",
        "type": "NOT_PRESENT"
      },
      {
        "paramName": "apiAccessToken",
        "paramValue": "",
        "type": "NOT_PRESENT"
      },
      {
        "paramName": "LicensedEmail",
        "paramValue": "",
        "type": "NOT_PRESENT"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "pixelId",
    "displayName": "Facebook Pixel ID",
    "simpleValueType": true,
    "help": "Please follow these instructions to get your Facebook Pixel ID: https://www.facebook.com/business/help/952192354843755"
  },
  {
    "type": "TEXT",
    "name": "FBToken",
    "displayName": "Facebook Token",
    "simpleValueType": true,
    "help": "Please review the help documentation to get an access token: https://developers.facebook.com/docs/marketing-api/conversions-api/get-started#access-token"
  },
  {
    "type": "TEXT",
    "name": "apiAccessToken",
    "displayName": "Deviate Tracking License Key",
    "simpleValueType": true,
    "help": "This key will be provided to you via Email on purchase, if you didn\u0027t receive this, please contact us at hello@deviatetracking.com"
  },
  {
    "type": "TEXT",
    "name": "LicensedEmail",
    "displayName": "Deviate Tracking Licensed Email",
    "simpleValueType": true,
    "help": "This is the email that you used when you purchased a key, if you are getting an error please email us at hello@deviatetracking.com"
  },
  {
    "type": "SELECT",
    "name": "StandardEvents",
    "displayName": "Facebook Standard Event Name",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "AddPaymentInfo",
        "displayValue": "AddPaymentInfo"
      },
      {
        "value": "AddToCart",
        "displayValue": "AddToCart"
      },
      {
        "value": "AddToWishlist",
        "displayValue": "AddToWishlist"
      },
      {
        "value": "CompleteRegistration",
        "displayValue": "CompleteRegistration"
      },
      {
        "value": "Contact",
        "displayValue": "Contact"
      },
      {
        "value": "CustomizeProduct",
        "displayValue": "CustomizeProduct"
      },
      {
        "value": "Donate",
        "displayValue": "Donate"
      },
      {
        "value": "FindLocation",
        "displayValue": "FindLocation"
      },
      {
        "value": "InitiateCheckout",
        "displayValue": "InitiateCheckout"
      },
      {
        "value": "Lead",
        "displayValue": "Lead"
      },
      {
        "value": "PageView",
        "displayValue": "PageView"
      },
      {
        "value": "Purchase",
        "displayValue": "Purchase"
      },
      {
        "value": "Schedule",
        "displayValue": "Schedule"
      },
      {
        "value": "Search",
        "displayValue": "Search"
      },
      {
        "value": "StartTrial",
        "displayValue": "StartTrial"
      },
      {
        "value": "SubmitApplication",
        "displayValue": "SubmitApplication"
      },
      {
        "value": "Subscribe",
        "displayValue": "Subscribe"
      },
      {
        "value": "ViewContent",
        "displayValue": "ViewContent"
      }
    ],
    "simpleValueType": true,
    "defaultValue": "PageView",
    "help": "You can use as many different types as you\u0027d like, but Facebook limits their aggregated data set to only up to a maximum of 8 events, which can be set in the event manager. Use the drop down and choose a type of event to track standard events. Standard events also support parameter objects with specific object properties, which allow you to include detailed information about an event. For a full description of events please visit https://developers.facebook.com/docs/facebook-pixel/reference"
  },
  {
    "type": "LABEL",
    "name": "Purchase Type Notice",
    "displayName": "**Currency Type and Purchase Value MUST be set in OBJECT PROPERTIES or no events will be submitted**",
    "enablingConditions": [
      {
        "paramName": "StandardEvents",
        "paramValue": "Purchase",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "ObjectProperties",
    "displayName": "Object Property",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "SELECT",
        "name": "DeduplicationEventID",
        "displayName": "Deduplication Event ID",
        "macrosInSelect": true,
        "selectItems": [],
        "simpleValueType": true,
        "help": "Providing an event ID, can help reduce the amount of events that are duplicated when using in conjunction with regular JavaScript FBQ events. We recommend setting a random variable and setting this parameter to it to avoid duplicated event data.",
        "defaultValue": "EventId"
      },
      {
        "type": "TEXT",
        "name": "content_category",
        "displayName": "content_category",
        "simpleValueType": true,
        "enablingConditions": [
          {
            "paramName": "StandardEvents",
            "paramValue": "AddPaymentInfo",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "AddToWishlist",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "InitiateCheckout",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "Lead",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "Search",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "ViewContent",
            "type": "EQUALS"
          }
        ],
        "help": "Category of the page/product."
      },
      {
        "type": "TEXT",
        "name": "content_ids",
        "displayName": "content_ids",
        "simpleValueType": true,
        "enablingConditions": [
          {
            "paramName": "StandardEvents",
            "paramValue": "AddPaymentInfo",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "AddToCart",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "AddToWishlist",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "InitiateCheckout",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "Purchase",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "Search",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "ViewContent",
            "type": "EQUALS"
          }
        ],
        "help": "Product IDs associated with the event, such as SKUs"
      },
      {
        "type": "TEXT",
        "name": "content_name",
        "displayName": "content_name",
        "simpleValueType": true,
        "help": "Name of the page/product",
        "enablingConditions": [
          {
            "paramName": "StandardEvents",
            "paramValue": "PageView",
            "type": "NOT_EQUALS"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "content_type",
        "displayName": "content_type",
        "simpleValueType": true,
        "enablingConditions": [
          {
            "paramName": "StandardEvents",
            "paramValue": "AddToCart",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "Purchase",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "ViewContent",
            "type": "EQUALS"
          }
        ],
        "help": "Either product or product_group based on the content_ids or contents being passed. If the IDs being passed in content_ids or contents parameter are IDs of products then the value should be product. If product group IDs are being passed, then the value should be product_group."
      },
      {
        "type": "TEXT",
        "name": "contents",
        "displayName": "contents",
        "simpleValueType": true,
        "enablingConditions": [
          {
            "paramName": "StandardEvents",
            "paramValue": "AddPaymentInfo",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "AddToCart",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "AddToWishlist",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "InitiateCheckout",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "Purchase",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "Search",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "ViewContent",
            "type": "EQUALS"
          }
        ],
        "help": "An array of JSON objects that contains the quantity and the International Article Number (EAN) when applicable, or other product or content identifier(s). id and quantity are the required fields."
      },
      {
        "type": "SELECT",
        "name": "currency",
        "displayName": "currency",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "DZD",
            "displayValue": "Algerian Dinar"
          },
          {
            "value": "ARS",
            "displayValue": "Argentine Peso"
          },
          {
            "value": "AUD",
            "displayValue": "Australian Dollar"
          },
          {
            "value": "BDT",
            "displayValue": "Bangladeshi Taka"
          },
          {
            "value": "BOB",
            "displayValue": "Bolivian Boliviano"
          },
          {
            "value": "BRL",
            "displayValue": "Brazilian Real"
          },
          {
            "value": "GBP",
            "displayValue": "British Pound"
          },
          {
            "value": "CAD",
            "displayValue": "Canadian Dollar"
          },
          {
            "value": "CLP",
            "displayValue": "Chilean Peso"
          },
          {
            "value": "CNY",
            "displayValue": "Chinese Yuan"
          },
          {
            "value": "COP",
            "displayValue": "Colombian Peso"
          },
          {
            "value": "CRC",
            "displayValue": "Costa Rican Colon"
          },
          {
            "value": "CZK",
            "displayValue": "Czech Koruna"
          },
          {
            "value": "DKK",
            "displayValue": "Danish Krone"
          },
          {
            "value": "EGP",
            "displayValue": "Egyptian Pounds"
          },
          {
            "value": "EUR",
            "displayValue": "Euro"
          },
          {
            "value": "GTQ",
            "displayValue": "Guatemalan Quetza"
          },
          {
            "value": "HNL",
            "displayValue": "Honduran Lempira"
          },
          {
            "value": "HKD",
            "displayValue": "Hong Kong Dollar"
          },
          {
            "value": "ISK",
            "displayValue": "Iceland Krona"
          },
          {
            "value": "INR",
            "displayValue": "Indian Rupee"
          },
          {
            "value": "IDR",
            "displayValue": "Indonesian Rupiah"
          },
          {
            "value": "ILS",
            "displayValue": "Israeli New Shekel"
          },
          {
            "value": "JPY",
            "displayValue": "Japanese Yen"
          },
          {
            "value": "KES",
            "displayValue": "Kenyan Shilling"
          },
          {
            "value": "KRW",
            "displayValue": "Korean Won"
          },
          {
            "value": "MOP",
            "displayValue": "Macau Patacas"
          },
          {
            "value": "MYR",
            "displayValue": "Malaysian Ringgit"
          },
          {
            "value": "MXN",
            "displayValue": "Mexican Peso"
          },
          {
            "value": "NZD",
            "displayValue": "New Zealand Dollar"
          },
          {
            "value": "NIO",
            "displayValue": "Nicaraguan Cordoba"
          },
          {
            "value": "NGN",
            "displayValue": "Nigerian Naira"
          },
          {
            "value": "NOK",
            "displayValue": "Norwegian Krone"
          },
          {
            "value": "PKR",
            "displayValue": "Pakistani Rupee"
          },
          {
            "value": "PYG",
            "displayValue": "Paraguayan Guarani"
          },
          {
            "value": "PEN",
            "displayValue": "Peruvian Nuevo Sol"
          },
          {
            "value": "PHP",
            "displayValue": "Philippine Peso"
          },
          {
            "value": "PLN",
            "displayValue": "Polish Zloty"
          },
          {
            "value": "QAR",
            "displayValue": "Qatari Rials"
          },
          {
            "value": "RON",
            "displayValue": "Romanian Leu"
          },
          {
            "value": "RUB",
            "displayValue": "Russian Ruble"
          },
          {
            "value": "SAR",
            "displayValue": "Saudi Arabian Riyal"
          },
          {
            "value": "SGD",
            "displayValue": "Singapore Dollar"
          },
          {
            "value": "ZAR",
            "displayValue": "South African Rand"
          },
          {
            "value": "SEK",
            "displayValue": "Swedish Krona"
          },
          {
            "value": "CHF",
            "displayValue": "Swiss Franc"
          },
          {
            "value": "TWD",
            "displayValue": "Taiwan Dollar"
          },
          {
            "value": "THB",
            "displayValue": "Thai Baht"
          },
          {
            "value": "TRY",
            "displayValue": "Turkish Lira"
          },
          {
            "value": "AED",
            "displayValue": "Uae Dirham"
          },
          {
            "value": "USD",
            "displayValue": "United States Dollar"
          },
          {
            "value": "UYU",
            "displayValue": "Uruguay Peso"
          },
          {
            "value": "VEF",
            "displayValue": "Venezuelan Bolivar"
          },
          {
            "value": "VND",
            "displayValue": "Vietnamese Dong"
          }
        ],
        "simpleValueType": true,
        "enablingConditions": [
          {
            "paramName": "StandardEvents",
            "paramValue": "AddPaymentInfo",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "AddToCart",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "AddToWishlist",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "CompleteRegistration",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "InitiateCheckout",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "Lead",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "Purchase",
            "type": "EQUALS"
          }
        ],
        "notSetText": "This parameter is required for the Purchase Event",
        "help": "This parameter is required for the Purchase Event, The currency for the value specified.",
        "defaultValue": "USD"
      },
      {
        "type": "TEXT",
        "name": "num_items",
        "displayName": "num_items",
        "simpleValueType": true,
        "enablingConditions": [
          {
            "paramName": "StandardEvents",
            "paramValue": "InitiateCheckout",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "Purchase",
            "type": "EQUALS"
          }
        ],
        "help": "Used with InitiateCheckout event. The number of items when checkout was initiated."
      },
      {
        "type": "TEXT",
        "name": "predicted_ltv",
        "displayName": "predicted_ltv",
        "simpleValueType": true,
        "enablingConditions": [
          {
            "paramName": "StandardEvents",
            "paramValue": "StartTrial",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "Subscribe",
            "type": "EQUALS"
          }
        ],
        "help": "Predicted lifetime value of a subscriber as defined by the advertiser and expressed as an exact value."
      },
      {
        "type": "TEXT",
        "name": "search_string",
        "displayName": "search_string",
        "simpleValueType": true,
        "enablingConditions": [
          {
            "paramName": "StandardEvents",
            "paramValue": "Search",
            "type": "EQUALS"
          }
        ],
        "help": "Used with the Search event. The string entered by the user for the search."
      },
      {
        "type": "SELECT",
        "name": "status",
        "displayName": "status",
        "selectItems": [
          {
            "value": true,
            "displayValue": "true"
          },
          {
            "value": false,
            "displayValue": "false"
          }
        ],
        "simpleValueType": true,
        "enablingConditions": [
          {
            "paramName": "StandardEvents",
            "paramValue": "CompleteRegistration",
            "type": "EQUALS"
          }
        ],
        "help": "Used with the CompleteRegistration event, to show the status of the registration."
      },
      {
        "type": "TEXT",
        "name": "value",
        "displayName": "value",
        "simpleValueType": true,
        "enablingConditions": [
          {
            "paramName": "StandardEvents",
            "paramValue": "AddPaymentInfo",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "AddToCart",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "AddToWishlist",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "CompleteRegistration",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "InitiateCheckout",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "Lead",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "Purchase",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "Search",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "StartTrial",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "Subscribe",
            "type": "EQUALS"
          },
          {
            "paramName": "StandardEvents",
            "paramValue": "ViewContent",
            "type": "EQUALS"
          }
        ],
        "valueValidators": [
          {
            "type": "NUMBER"
          }
        ],
        "notSetText": "This parameter is required for the Purchase Event",
        "help": "The value of a user performing this event to the business."
      }
    ],
    "help": "These are extra parameters you can send along with your event, some of which are required by standard events."
  },
  {
    "type": "CHECKBOX",
    "name": "TestEventStatus",
    "checkboxText": "Send as a Test Event?",
    "simpleValueType": true,
    "help": "This enables the use of the the Events Manager test events tool, for more information go here: https://www.facebook.com/business/help/2040882565969969?id\u003d1205376682832142"
  },
  {
    "type": "TEXT",
    "name": "TestEventLabel",
    "displayName": "Test Event Label",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "TestEventStatus",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "help": "This should come from your events manager in the testing events section",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

//permissions and Required Components
const log = require("logToConsole");
const sendPixel = require("sendPixel");
const JSON = require("JSON");
const getTimestamp = require("getTimestampMillis");
const encodeUriComponent = require("encodeUriComponent");
const encodeUri = require("encodeUri");
const getUrl = require("getUrl");
const queryPermission = require("queryPermission");
const setCookie = require("setCookie");
const callInWindow = require("callInWindow");
var copyFromWindow = require("copyFromWindow");
const copyFromDataLayer = require("copyFromDataLayer");
var setInWindow = require("setInWindow");
const createQueue = require("createQueue");
const injectScript = require("injectScript");
const Math = require("Math");
const getCookieValues = require('getCookieValues');


function sendPixelData(){
//timestamp generation
  const evtime = Math.round(getTimestamp() / 1000);
  log(evtime);

  //get customer information parameters

if (getCookieValues('_fbc').length > 0) {
  var fbcid = getCookieValues('_fbc', false)[0];
} 

if (getCookieValues('_fbp').length > 0) {
  var fbpid = getCookieValues('_fbp', false)[0];
} 

  
  // get datalayer window values
  
    const gtmData = copyFromWindow("gtmData");
  log("GTM Data:", gtmData);
  
  
  //get all fields from Tag Template
  const lickey = data.apiAccessToken;
  const licemail = data.LicensedEmail;
  const fbtkn = data.FBToken;
  const testevlabel = data.TestEventLabel;
  const pixelId = data.pixelId;

  const objprop = JSON.stringify([
    {"event_name": data.StandardEvents,
      "event_time": evtime,
      "event_id": data.DeduplicationEventID,
      "event_source_url": getUrl(), "action_source": "website",
      "user_data": {"client_user_agent": gtmData.ua, "client_ip_address": gtmData.ip, "fbc":getCookieValues('_fbc', false)[0], "fbp":getCookieValues('_fbc', false)[0]},
      "custom_data": {"content_category": data.content_category,
        "content_ids": data.content_ids,
        "content_name": data.content_name,
        "content_type": data.content_type,
        "contents": data.contents,
        "currency": data.currency,
        "num_items": data.num_items,
        "predicted_ltv": data.predicted_ltv,
        "search_string": data.search_string,
        "status": data.status,
        "value": data.value},
      "opt_out": false},
  ]);


  //send Get Request to Deviate Tracking API
  //eslint-disable-next-line prefer-template
  const url = "https://wc-service-ert7bqptja-uc.a.run.app/license/validate?" +
        "license_key=" + encodeUriComponent(lickey) +
        "&email=" + encodeUriComponent(licemail) +
        "&fbaccess_tkn=" + encodeUriComponent(fbtkn) +
        "&additional_data=" + encodeUriComponent(objprop) +
        "&product_id=DeviateToolsCapi_Prod" +
        "&fbpixel_id=" + encodeUriComponent(pixelId) +
        "&test_event_code=" + testevlabel;

  sendPixel(url, data.gtmOnSuccess, data.gtmOnFailure);


  data.gtmOnSuccess();
}

setInWindow("gtmFunction", sendPixelData, true);



function onSuccess(){}
function onFailure(){}
injectScript("https://deviatetracking.com/getuseragent.js", onSuccess, onFailure);


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "send_pixel",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedUrls",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_url",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urlParts",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "queriesAllowed",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "dataLayer"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "gtmFunction"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "gtmData"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "set_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedCookies",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_fbc"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_fbp"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://deviatetracking.com/getuseragent.js"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_data_layer",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keyPatterns",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "gtm.UA"
              },
              {
                "type": 1,
                "string": "UA"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "cookieNames",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "_fbc"
              },
              {
                "type": 1,
                "string": "_fbp"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 3/12/2021, 10:42:29 AM


